<UserControl x:Class="TopoCentras.Wpf.Views.UzsakymaiView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:views="clr-namespace:TopoCentras.Wpf.Views">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />

        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0"
                    Orientation="Horizontal"
                    Margin="0 0 0 10">
            <TextBlock Text="Užsakymai"
                       FontSize="20"
                       FontWeight="Bold"
                       VerticalAlignment="Center"
                       Margin="0 0 20 0" />

            <Button Content="Atnaujinti"
                    Padding="10,5"
                    Margin="0 0 10 0"
                    Command="{Binding LoadUzsakymaiCommand}" />
            <Button Content="Sukurti naują užsakymą"
                    Padding="10,5"
                    Click="OnCreateUzsakymasClick" />
        </StackPanel>

        <views:CreateUzsakymasView Grid.Row="1"
                                   x:Name="CreateUzsakymasView"
                                   Visibility="Collapsed"
                                   DataContext="{Binding CreateVM}"
                                   OrderCreated="CreateUzsakymasView_OnOrderCreated"
                                   OrderCancelled="CreateUzsakymasView_OnOrderCancelled" />


        <DataGrid Grid.Row="2"
                  x:Name="UzsakymaiGrid"
                  ItemsSource="{Binding Uzsakymai}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  MouseDoubleClick="OnUzsakymaiGridDoubleClick">

            <DataGrid.Columns>
                <DataGridTemplateColumn Header="">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="X"
                                    Padding="4,2"
                                    Margin="5,0"
                                    Command="{Binding DataContext.DeleteUzsakymasCommand,
                                      RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                    CommandParameter="{Binding}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Uzsakymo ID" Binding="{Binding UzsakymasId}" Width="*" />
                <DataGridTextColumn Header="Kliento Vardas" Binding="{Binding Klientas.Pavadinimas}" Width="2*" />
                <DataGridTextColumn Header="Bendra suma" Binding="{Binding BendraUzsakymoSuma}" Width="*" />
                <DataGridTextColumn Header="Užsakymo data" Binding="{Binding UzsakymoSukurimoData}" Width="*" />
                <DataGridTextColumn Header="Prekių kiekis"
                                    Binding="{Binding UzsakymasPrekes.Count}" Width="*" />
            </DataGrid.Columns>

        </DataGrid>


    </Grid>
</UserControl>